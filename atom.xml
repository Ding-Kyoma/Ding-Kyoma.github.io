<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yiding&#39;s Blog</title>
  
  
  <link href="https://blog.kyoma.top/atom.xml" rel="self"/>
  
  <link href="https://blog.kyoma.top/"/>
  <updated>2022-05-30T14:04:43.211Z</updated>
  <id>https://blog.kyoma.top/</id>
  
  <author>
    <name>Yiding Wang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>nginx 404 重定向</title>
    <link href="https://blog.kyoma.top/posts/1003/"/>
    <id>https://blog.kyoma.top/posts/1003/</id>
    <published>2022-05-30T12:07:10.000Z</published>
    <updated>2022-05-30T14:04:43.211Z</updated>
    
    <content type="html"><![CDATA[<p>简单记录一下如何将 nginx 404 页面重定向为 404.html</p><div class="story post-story"><h2 id="Step-1-打开配置文件"><a href="#Step-1-打开配置文件" class="headerlink" title="Step. 1 打开配置文件"></a>Step. 1 打开配置文件</h2><p>查看配置文件路径</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nginx.service</span><br></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">● nginx.service - nginx - high performance web server</span><br><span class="line">     Loaded: loaded (<span class="regexp">/lib/</span>systemd<span class="regexp">/system/</span>nginx.service; enabled; vendor preset: enabled)</span><br><span class="line">    Drop-In: <span class="regexp">/etc/</span>systemd<span class="regexp">/system/</span>nginx.service.d</span><br><span class="line">             └─override.conf</span><br><span class="line">     Active: active (running) since Mon <span class="number">2022</span>-<span class="number">05</span>-<span class="number">30</span> <span class="number">14</span>:<span class="number">30</span>:<span class="number">24</span> CST; <span class="number">5</span>h <span class="number">41</span>min ago</span><br><span class="line">       Docs: https:<span class="regexp">//</span>nginx.org<span class="regexp">/en/</span>docs/</span><br><span class="line">    Process: <span class="number">15035</span> ExecStart=<span class="regexp">/usr/</span>sbin<span class="regexp">/nginx -c /</span>etc<span class="regexp">/nginx/</span>nginx.conf (code=exited, status=<span class="number">0</span>/SUCCESS)</span><br><span class="line">    Process: <span class="number">15038</span> ExecStartPost=<span class="regexp">/bin/</span>sleep <span class="number">0.1</span> (code=exited, status=<span class="number">0</span>/SUCCESS)</span><br><span class="line">   Main PID: <span class="number">15036</span> (nginx)</span><br><span class="line">      Tasks: <span class="number">2</span> (limit: <span class="number">2340</span>)</span><br><span class="line">     Memory: <span class="number">5.2</span>M</span><br><span class="line">        CPU: <span class="number">34.140</span>s</span><br><span class="line">     CGroup: <span class="regexp">/system.slice/</span>nginx.service</span><br><span class="line">             ├─<span class="number">15036</span> nginx: master process <span class="regexp">/usr/</span>sbin<span class="regexp">/nginx -c /</span>etc<span class="regexp">/nginx/</span>nginx.conf</span><br><span class="line">             └─<span class="number">15037</span> nginx: worker process</span><br></pre></td></tr></table></figure><p>Process: 15035 ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -c <code>/etc/nginx/nginx.conf</code> 看出配置文件地址</p><p>编辑配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Step-2-添加404页面"><a href="#Step-2-添加404页面" class="headerlink" title="Step. 2 添加404页面"></a>Step. 2 添加404页面</h2><p>在<code>http</code>中添加</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">fastcgi_intercept_errors</span> <span class="literal">on</span>;</span><br></pre></td></tr></table></figure><p>在<code>server</code>里添加</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">error_page</span>   <span class="number">404</span>    /<span class="number">404</span>.html;</span><br></pre></td></tr></table></figure></div><div class="story post-story"><h2 id="Step-3-重启"><a href="#Step-3-重启" class="headerlink" title="Step. 3 重启"></a>Step. 3 重启</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx.service</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">记录一下如何将 nginx 404 重定向为 404.html</summary>
    
    
    
    <category term="建站" scheme="https://blog.kyoma.top/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="nginx" scheme="https://blog.kyoma.top/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>tensorflow 自定义指标 - MacroRecall &amp; MacroF1</title>
    <link href="https://blog.kyoma.top/posts/1003/"/>
    <id>https://blog.kyoma.top/posts/1003/</id>
    <published>2022-05-29T05:41:30.000Z</published>
    <updated>2022-05-29T06:14:36.280Z</updated>
    
    <content type="html"><![CDATA[<p>Tensorflow 自带的指标不够用，尤其是处理不平衡数据集时，<code>macro recall </code>可以指示出不被 classes weight 所影响的平均<code>recall</code>。</p><div class="story post-story"><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>自定义指标 class 需要继承 <a href="https://www.tensorflow.org/api_docs/python/tf/keras/metrics/Metric">tf.keras.metrics.Metric</a> </p><p>解释一下其中的 function</p><ul><li><code>reset_states</code> 每个epoch结束后清零</li><li><code>update_state</code> 在一个epoch中每个step update的方式</li><li><code>result</code> 返回的值</li></ul><p>我在 class 中维护了一张 confusion_matrix 叫做<code>total_cm</code>。因此能很方便的计算<code>macro recall</code>，<code>macro f1</code> 等数值。</p><p>通过confusion_matrix可以计算其他很多的数值，可以通过修改<code>process_confusion_matrix</code> 来实现</p></div><div class="story post-story"><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>下面定义了两个自定义指标 <code>MacroRecall</code> 和 <code>MacroF1</code> ，使用的时候只要在<code>model.compile</code>时加进<code>metrics</code>即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MacroRecall</span>(tf.keras.metrics.Metric):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">2</span>, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(MacroRecall,self).__init__(name=<span class="string">&#x27;macro_recall&#x27;</span>,**kwargs) <span class="comment"># handles base args (e.g., dtype)</span></span><br><span class="line">        self.num_classes=num_classes</span><br><span class="line">        self.total_cm = self.add_weight(<span class="string">&quot;total&quot;</span>, shape=(num_classes,num_classes), initializer=<span class="string">&quot;zeros&quot;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_states</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> self.variables:</span><br><span class="line">            s.assign(tf.zeros(shape=s.shape))</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_state</span>(<span class="params">self, y_true, y_pred,sample_weight=<span class="literal">None</span></span>):</span><br><span class="line">        self.total_cm.assign_add(self.confusion_matrix(y_true,y_pred))</span><br><span class="line">        <span class="keyword">return</span> self.total_cm</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">result</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.process_confusion_matrix()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">confusion_matrix</span>(<span class="params">self,y_true, y_pred</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Make a confusion matrix</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        y_true=tf.argmax(y_true,<span class="number">1</span>)</span><br><span class="line">        y_pred=tf.argmax(y_pred,<span class="number">1</span>)</span><br><span class="line">        cm=tf.math.confusion_matrix(y_true,y_pred,dtype=tf.float32,num_classes=self.num_classes)</span><br><span class="line">        <span class="keyword">return</span> cm</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_confusion_matrix</span>(<span class="params">self</span>):</span><br><span class="line">        cm=self.total_cm</span><br><span class="line">        diag_part=tf.linalg.diag_part(cm)</span><br><span class="line">        <span class="comment"># precision=diag_part/(tf.reduce_sum(cm,0)+tf.constant(1e-15))</span></span><br><span class="line">        recall=diag_part/(tf.reduce_sum(cm,<span class="number">1</span>)+tf.constant(<span class="number">1e-15</span>))</span><br><span class="line">        <span class="comment"># f1=2*precision*recall/(precision+recall+tf.constant(1e-15))</span></span><br><span class="line">        <span class="keyword">return</span> tf.reduce_sum(recall)/self.num_classes</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MacroF1</span>(tf.keras.metrics.Metric):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_classes=<span class="number">2</span>, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>(MacroF1,self).__init__(name=<span class="string">&#x27;macro_f1&#x27;</span>,**kwargs) <span class="comment"># handles base args (e.g., dtype)</span></span><br><span class="line">        self.num_classes=num_classes</span><br><span class="line">        self.total_cm = self.add_weight(<span class="string">&quot;total&quot;</span>, shape=(num_classes,num_classes), initializer=<span class="string">&quot;zeros&quot;</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_states</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> self.variables:</span><br><span class="line">            s.assign(tf.zeros(shape=s.shape))</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_state</span>(<span class="params">self, y_true, y_pred,sample_weight=<span class="literal">None</span></span>):</span><br><span class="line">        self.total_cm.assign_add(self.confusion_matrix(y_true,y_pred))</span><br><span class="line">        <span class="keyword">return</span> self.total_cm</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">result</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.process_confusion_matrix()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">confusion_matrix</span>(<span class="params">self,y_true, y_pred</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Make a confusion matrix</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        y_true=tf.argmax(y_true,<span class="number">1</span>)</span><br><span class="line">        y_pred=tf.argmax(y_pred,<span class="number">1</span>)</span><br><span class="line">        cm=tf.math.confusion_matrix(y_true,y_pred,dtype=tf.float32,num_classes=self.num_classes)</span><br><span class="line">        <span class="keyword">return</span> cm</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_confusion_matrix</span>(<span class="params">self</span>):</span><br><span class="line">        cm=self.total_cm</span><br><span class="line">        diag_part=tf.linalg.diag_part(cm)</span><br><span class="line">        precision=diag_part/(tf.reduce_sum(cm,<span class="number">0</span>)+tf.constant(<span class="number">1e-15</span>))</span><br><span class="line">        recall=diag_part/(tf.reduce_sum(cm,<span class="number">1</span>)+tf.constant(<span class="number">1e-15</span>))</span><br><span class="line">        f1=<span class="number">2</span>*precision*recall/(precision+recall+tf.constant(<span class="number">1e-15</span>))</span><br><span class="line">        <span class="keyword">return</span> tf.reduce_sum(f1)/self.num_classes</span><br><span class="line">    </span><br><span class="line"><span class="comment"># model</span></span><br><span class="line">model.<span class="built_in">compile</span>(metrics=[<span class="string">&#x27;accuracy&#x27;</span>,MacroRecall(num_classes),MacroF1(num_classes)])</span><br></pre></td></tr></table></figure></div>]]></content>
    
    
    <summary type="html">在训练时可视化 macro recall值，对于class不平衡的数据集十分有用</summary>
    
    
    
    <category term="Machine Learning" scheme="https://blog.kyoma.top/categories/Machine-Learning/"/>
    
    
    <category term="metrics" scheme="https://blog.kyoma.top/tags/metrics/"/>
    
  </entry>
  
  <entry>
    <title>gcp public data goes &amp; cloudsat 数据处理</title>
    <link href="https://blog.kyoma.top/posts/1002/"/>
    <id>https://blog.kyoma.top/posts/1002/</id>
    <published>2022-05-29T05:14:48.000Z</published>
    <updated>2022-05-30T13:43:35.919Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码看着不太对 (>_< )( >_<)NO" data-whm="这个文章不能被校验, 不过还是能看看解密后的内容~">  <script id="hbeData" type="hbeData" data-hmacdigest="e7818d79a9dc6f68bcc592036b46d5a45d0db8f0c224f84889f19ea9640a48c2">165d50f05814027fb7fe5e4ae8a088d8d0253f6d48d4c706e368f3c5cbde838dd5ced62cabc190f59bf73fb2b8e68179ca091c142b50a838df1d8119d539b40127eccd839b292f645df0312cd10904165f79b55a72a2b6438287c543a01c5a48402bcc07a3d6d26465275db3d82bbc67b64f19f0c8af87172406cd2f90eb4a9cecbb2c1bb1503230cab98283688c5e55b109a3de9415a2d8b5234089a10543527a072138d2dd24853b353f9342e4f588a6edae409f722a83ef78c7af0c2350f56a992b7df3831767f2f9506794e9a1177b65e0a1cafacfaa8834f8a15f22eb1dd1a5f18d29e40b2bcf666bc37914888fd524b381fe1e027969d383960b4b2a033632c3223680d40a4da8ea700f91ccb8ad99da758a50f508a7a33d49788c29e14eac63318368a83286411d8389c0f69b3d95113285f9151af886feb0a0cc6682e44fda33833fb368bc766b339da9ca12f62d2dcd630a5cc27f5a9ab8703a3367bb59f4d759d02fa7bf76ce6c3b03bd03d148a405f38cca7d68745d8f9f75cf1f405f68299ba80d2f19015120fe4076942798a1682a6e82c54603255947cafe3790feb00810f1cb1b265f653495d30b5864425da1f80a8b50ac11a45369d5a57f649f0f4c39373229eb70edbda4e4db2b93276f471078e500b9044ee8f33421c69240fa93b354ee1bff5e97c7f6a135e49531e1079f7524233e8089f796942d8bbd256ffedf88be57d15ce9abdd1fa3299a4996593d8193590d7bdef8ae4513aba1d8ef3f5c09638c0b3d87fb4fcce73e89d0361a56ac50cdb636813bc2e41b9e2dc5ab26b0e5652df72b015fde0c71dfd3fd29bc33341e77e1945e6926c9af074a566084664d207be2b4aa13f28858995df4e2a6a134174eb19837319c92a42f0ba62a31d92ac41f34f97b737b2814fe4cb1b1b076f4afa7b48277d6a735e8d8d4ef51d848348ca27c30994324a71f32f395d689a5c6dc9a51be9ac955f1035915fcc28da973d8b9e31c4a0f4465d9a18e04798819bd09261a43160ef5bccc6169d2694b3d8bbaa3b88f9dd6b924370767d98974099755219509de090e44ed0abd71a645e6d88fede266b507119bea2f72483661533493ac9804c918ca0aa9b9e4f06483acd1af698e348af15c5048341824a2926a043d589f675231563c597ad75e0b48d48bf429d9a8de4472e68bc16626580e5b5258bd7b0b72740522af6c25aaeacefaa31891b1349dcdd23ec21b35c7011a1a2a3b0cb43bc10cf0f551ba205f8805a8bde5a0b39d6b0d92fa6ece9b48ad7e08eecffa52b81ec24d8407d07b79ed860b9ef42108e08671388e55f731382193eac51e1229eed43d20ec7f3df0048aa6e9a3911285a0fefa35336ebefb1490a564afa788ff7f816d5ff6a5cf072ea5ec4c05ead6ee11c7980089248c09b58f25c8a7a44cf3b274e588a3b66d11f1b30042cbf4e5e385fa944735c34f6cc1f99622774c9752140a78443543210d0163418f0329a774e38f9eaf23cf223cce6afed9824d3c4890a9b274dddf5e14aae23039236ff25c889e0843711798c479150ca27d7148511f2e87ca0a128a91c76e9fab02d86fb5832ac60481b74942709cd775bf02d4c6194c0fafae57b397c8fa6060a6e5558c4d7eaa02686b2dd699804ab391b118b351fd1c6808cc00194e3a32f7f978a2fba4b033fb4f56809deb4fa5d02f5a42e53c64e128e0c00539008fe0abe49206373e5df0fecd37ef85e1d79de74d5436e23886663e93538793d210fa86964640d7108f4dd99731189b3cab61252476f416cdaa724c2aa28d580cde5284d262bb617232faf791e2c3c455ed47338fed4cba9f51ceb72c2c02dcc839568c170105f0b014e8a8e9a5f6b76c9ffa0da17fc936f9cb3e56b73bb4139f23acf49eb0c648e984feff49ba6be21f1c66c62e4d9cf04fd9a22789fc0bdef160b7ea61be3fc36c08f5937b5e8cccea166df12c6488cae27da5c17b80b4845389319b51b80c36036db00eea3ccc</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">密码是什么 (ﾟヘﾟ)？</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">从两个 raw 数据库中提取需要的数据，处理成机器学习可以使用的 dataset</summary>
    
    
    
    <category term="Machine Learning" scheme="https://blog.kyoma.top/categories/Machine-Learning/"/>
    
    
    <category term="python" scheme="https://blog.kyoma.top/tags/python/"/>
    
    <category term="dataset" scheme="https://blog.kyoma.top/tags/dataset/"/>
    
    <category term="machine learning" scheme="https://blog.kyoma.top/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>m1 mac 如何完美开启 2k144 hidpi</title>
    <link href="https://blog.kyoma.top/posts/1002/"/>
    <id>https://blog.kyoma.top/posts/1002/</id>
    <published>2022-05-28T07:48:48.000Z</published>
    <updated>2022-05-29T07:21:18.289Z</updated>
    
    <content type="html"><![CDATA[<p>HiDPI是苹果的一个显示技术，若你外接显示器很糊说明没有开启HiDPI。网上很多教程使用虚拟镜像的方式来开启，但是有很多的缺点。这是在最新mac上开启hidpi的方法。</p><p>若你是使用intel芯片的话，可以使用<a href="https://github.com/xzhih/one-key-hidpi">一键脚本</a>能轻轻松松开启hidpi。若你是新的Apple m1芯片电脑的话，跟着教程走吧</p><p>这里看是否是m1芯片电脑。</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.33.52.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.33.52.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 22.33.52"></p><div class="story post-story"><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>这是我的硬件环境</p><ul><li>MacBook Pro（16英寸，2021年）芯片：Apple M1 Pro 版本：macOS 12.4</li><li>一根 type-c to HDMI 2.0 直连线</li><li>显示器：2560x1440@144</li></ul><p>软件要求：</p><ul><li><a href="https://www.foxmac.com/switchresx.html">SwitchResX 4.11.1</a>  或者在<a href="https://mac.orsoon.com/">未来mac</a>寻找、安装更高版本的软件</li></ul></div><div class="story post-story"><h2 id="开启方法"><a href="#开启方法" class="headerlink" title="开启方法"></a>开启方法</h2><h3 id="Step-1-安装软件"><a href="#Step-1-安装软件" class="headerlink" title="Step. 1 安装软件"></a>Step. 1 安装软件</h3><p>首先安装 SwitchResX，链接在上面。安装的时候选择<strong>为电脑上所有用户安装</strong></p><p>安装好后打开SwitchResX，记录下 <code>Vendor</code> 和 <code>Product</code> （这是个16进制数字，我这刚刚好都是数字）</p><blockquote><p>这里没有显示Vendor 和Product 的小伙伴检查一下SwitchResX的版本是否是m1原生的，后面需要用到这两个值</p></blockquote><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2021.49.59.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2021.49.59.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 21.49.59"></p><h3 id="Step-2-制作配置文件"><a href="#Step-2-制作配置文件" class="headerlink" title="Step. 2 制作配置文件"></a>Step. 2 制作配置文件</h3><p>在桌面新建个<strong>文件夹</strong>，命名为 <code>DisplayVendorID-XXXX</code> XXXX为 <code>Vendor</code> 小写数值。例如：DisplayVendorID-2164</p><p>然后，新建一个文件，命名为<code>DisplayProductID-YYYY</code> YYYY为<code>Product</code> 小写数值。 例如：DisplayProductID-2772。<strong>保存在上面创建的文件夹里</strong>。注意文件名<u>不要有后缀</u>。若你电脑不显示文件后缀的话要小心。</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/image-20220529000731422.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/image-20220529000731422.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20220529000731422"></p><p>你有两个方法制作、填写DisplayProductID-YYYY内容</p><ul><li><p>方法一：在<a href="https://codeclou.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/">这里</a>在线制作配置文件, 并复制到DisplayProductID-YYYY</p></li><li><p>方法二：若你是标准2560x1440的16:9显示屏，可以修改下面的代码，并复制到DisplayProductID-YYYY</p></li></ul><p>方法二：注意，这里 <code>DisplayProductID</code> 和 <code>DisplayVendorID</code> <u>要填<strong>十进制</strong></u>，所以你需要把之前<strong>十六进制</strong>的<code>Vendor</code>和<code>Product</code> 转换后填入。<code>DisplayProductName</code> 填上你的显示器名字，例如：SwitchResX4 - X2772CK。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>DisplayProductName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">string</span>&gt;</span>你的显示器名字<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>DisplayProductID<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">integer</span>&gt;</span>53358<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>DisplayVendorID<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">integer</span>&gt;</span>4268<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>scale-resolutions<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAKAAAABaAAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAFAAAAAtAAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAPAAAACHAAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAHgAAABDgAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAMgAAABwgAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAGQAAAA4QAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAKAgAABaAAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAKrAAABgAAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAFVgAAAwAAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">data</span>&gt;</span>AAAGkAAAA7EAAAABACAAAA==<span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure><p>我在制作网站上添加了一个1680x945分辨率，个人感觉非常适合2560*1440的显示器。</p><p>这个文件分辨率包括2560x1440, 1280x720, 3840x2160, 1920x1080, 3200x1800, 1600x900, 2562x1440, 2732x1536, 1366x768, 1680x945</p><h3 id="Step-3-移动配置文件"><a href="#Step-3-移动配置文件" class="headerlink" title="Step. 3 移动配置文件"></a>Step. 3 移动配置文件</h3><p>我们需要把<code>DisplayVendorID-XXXX</code>文件夹放入 <code>/Library/Displays/Contents/Resources/Overrides/</code> 里</p><p>文件夹可以用快捷键 shift + cmd + g ，输入路径名快速打开</p><p>然而， 很多人第一次是没有 <code>Overrides</code> 文件夹的。我们偷懒一下，跑一下<a href="https://github.com/xzhih/one-key-hidpi/blob/master/README-zh.md">xzhih的one-key脚本</a>，试图开启hidpi（然而并不会起作用）。</p><p>这时就创建好了 <code>Overrides</code> 文件夹。你可以再跑一遍代码卸载掉hidpi。<code>Overrides </code>文件夹仍然是留着的。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/xzhih/one-key-hidpi/master/hidpi.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>现在你可以将桌面上的<code>DisplayVendorID-XXXX</code>文件夹放入 <code>/Library/Displays/Contents/Resources/Overrides/</code> 里了！需要输入电脑开机密码</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.13.462.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.13.462.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 22.13.462"></p><p>如上图检查无误后<strong>重启电脑</strong>。</p><h3 id="Step-4-开启HiDPI"><a href="#Step-4-开启HiDPI" class="headerlink" title="Step. 4 开启HiDPI"></a>Step. 4 开启HiDPI</h3><p>打开SwitchResX，<u>勾上</u>并填写Startup分辨率和Scaled分辨率，这两个数值是<u><strong>两倍</strong></u>的关系。这里以 1680x945 做为例子。后面144hz是屏幕刷新率。按照你的硬件填。</p><p>注意，填入的<u>Startup分辨率需要出现在制作的文件中</u>，详见Step. 2</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.24.55.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.24.55.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 22.24.55"></p><p>应用后，你就可以看到1680x945的HiDPI选项了~。若看不到的话线缆插拔一下，重启一下，捣鼓捣鼓就看到了</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.25.262.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.25.262.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 22.25.262"></p></div><div class="story post-story"><h2 id="展示"><a href="#展示" class="headerlink" title="展示"></a>展示</h2><p>这是我开启后的效果，上图！</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.28.26.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2022.28.26.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 22.28.26"></p><p>若有问题可以在下面留言，我会第一时间看到回复的~</p></div>]]></content>
    
    
    <summary type="html">使用SwitchResX，并制作显示器文件，在m1 mac上完美开启HiDPI</summary>
    
    
    
    <category term="macOS" scheme="https://blog.kyoma.top/categories/macOS/"/>
    
    
    <category term="hidpi" scheme="https://blog.kyoma.top/tags/hidpi/"/>
    
  </entry>
  
  <entry>
    <title>Hexo github图床国内加速方案</title>
    <link href="https://blog.kyoma.top/posts/1001/"/>
    <id>https://blog.kyoma.top/posts/1001/</id>
    <published>2022-05-28T03:24:25.000Z</published>
    <updated>2022-05-30T15:23:56.137Z</updated>
    
    <content type="html"><![CDATA[<p>我使用 hexo (volantis主题) + github pages ，picgo + github 图床 布置博客。众所周知，github在国内体验不佳，尤其是以<code>raw.githubusercontent.com</code>开头的网址。通常表现就是在国内图片加载不出，加载缓慢。因此，我使用国内的coding来加速github图床，使得国内也能顺利的浏览图片。</p><p>这里推荐一下 <a href="https://volantis.js.org/examples/">volantis主题</a>，十分好用。其中配置有一个replace 可以轻松替换原有的github网址到coding网址 </p><div class="story post-story"><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>通过实时同步github图床到腾讯coding，网页加载的图床链接改为coding的图床。</p><ul><li>优势<ul><li>Coding 免费，不需要cdn等付费服务</li><li>实时：可以通过构建计划实时同步github图床</li><li>若使用hexo volantis主题不需要更改已存在md文件的图片链接，或者你可以找找你使用的主题中有没有「全局页面字符串替换」的功能</li></ul></li><li>劣势<ul><li>Coding 仓库最大容量2G，大的图床不适用</li><li>国外也是访问coding图床，相对偏慢</li></ul></li></ul></div><div class="story post-story"><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul><li><p>已经拥有github图床</p></li><li><p>markdown编辑器（Typora）已经可以自动上传图片到图床</p></li></ul></div><div class="story post-story"><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>注册Coding，新建项目 </p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.30.35.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.30.35.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.30.35"></p><p>选择 <code>代码托管</code> <code>构建流水线&amp;自动化测试</code></p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.32.30.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.32.30.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.32.30"></p><p>完成创建</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.34.05.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.34.05.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.34.05"></p><p>首先创建令牌，右下角项目设置</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.50.03.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.50.03.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.50.03"></p><p>记录一下用户名和密码，之后要用</p><p>接下来导入外部仓库</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.34.40.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.34.40.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.34.40"></p><p>选择URL导入，填上你github图床仓库，并勾选<code>公开仓库</code></p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.36.43_2.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.36.43_2.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.36.43_2"></p><p>接下来设置实时同步。选择构建计划</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.38.492.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.38.492.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.38.492"></p><p>创建构建计划，并选择自定义构建过程</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.40.05.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.40.05.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.40.05"></p><p>选择github，并选择图床仓库，确定</p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.41.50.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.41.50.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.41.50"></p><p>接下来选择文本编辑器，并将以下代码复制到里面 (替换你自己的) </p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.43.15.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.43.15.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.43.15"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  agent any</span><br><span class="line">  stages &#123;</span><br><span class="line">    <span class="title function_">stage</span>(<span class="params"><span class="string">&quot;检出&quot;</span></span>) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        <span class="title function_">checkout</span>([</span><br><span class="line">          <span class="attr">$class</span>: <span class="string">&#x27;GitSCM&#x27;</span>,</span><br><span class="line">          <span class="attr">branches</span>: [[<span class="attr">name</span>: <span class="variable constant_">GIT_BUILD_REF</span>]],</span><br><span class="line">          <span class="attr">userRemoteConfigs</span>: [[</span><br><span class="line">            <span class="attr">url</span>: <span class="variable constant_">GIT_REPO_URL</span>,</span><br><span class="line">            <span class="attr">credentialsId</span>: <span class="variable constant_">CREDENTIALS_ID</span></span><br><span class="line">        ]]])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">stage</span>(<span class="params"><span class="string">&#x27;拉取到Coding&#x27;</span></span>) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        echo <span class="string">&quot;正在拉取&quot;</span></span><br><span class="line">        sh <span class="string">&#x27;git push -f https://$CODING_NAME:$CODING_TOKEN@e.coding.net/你的团队名/项目名称/代码仓库名称.git HEAD:main&#x27;</span></span><br><span class="line">        echo <span class="string">&quot;拉取完成&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>旧的仓库是master分支, 以上代码使用新的命名方式：main分支</p></blockquote><p>同时，在环境变量中，添加之前记录的令牌用户名和密码，<code>CODING_NAME</code>和 <code>CODING_TOKEN</code>， 添加的时候选择<code>保密</code></p><p><img src="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.53.28.png" class="lazyload" data-srcset="https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/%E6%88%AA%E5%B1%8F2022-05-28%2013.53.28.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="截屏2022-05-28 13.53.28"></p><p>最后点击立即构建，看看是否成功~</p></div><div class="story post-story"><h2 id="替换Coding图床"><a href="#替换Coding图床" class="headerlink" title="替换Coding图床"></a>替换Coding图床</h2><p>若是使用的是volantis主题，<code>_config.volantis.yml</code> 里面有一个全局替换的选项，</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">replace:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/</span> <span class="string">=&gt;</span> <span class="string">https://dingkyoma.coding.net/p/img/d/CloudPic/git/raw/master/</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>在<code>hexo generate</code>的时候会自动将github的网址替换成coding的网址</p><p>若不是使用volantis主题，你需要看看你的主题是否有「全局页面字符串替换」的功能。若没需要手动替换链接为coding的链接，并且在自动上传的图床的工具中设置coding的网址</p><p>例子：</p><p><code>raw.githubusercontent.com/Ding-Kyoma/CloudPic/master/img/(pid-69000196)空の色2.jpg</code></p><p><code>dingkyoma.coding.net/p/img/d/CloudPic/git/raw/master/img/(pid-69000196)空の色2.jpg</code></p></div>]]></content>
    
    
    <summary type="html">使用 coding 加速 github 图床</summary>
    
    
    
    <category term="建站" scheme="https://blog.kyoma.top/categories/%E5%BB%BA%E7%AB%99/"/>
    
    
    <category term="hexo" scheme="https://blog.kyoma.top/tags/hexo/"/>
    
    <category term="图床" scheme="https://blog.kyoma.top/tags/%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
</feed>
